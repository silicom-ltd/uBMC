<% if not self.embedded then %>
<!--<form method="post" enctype="multipart/form-data" action="<%=REQUEST_URI%>"> -->
<% end %>
	<div class="cbi-map" id="cbi-<%=self.config%>">
		<% if self.title and #self.title > 0 then %><h2><a id="content" name="content"><%=self.title%></a></h2><% end %>
		<% if self.description and #self.description > 0 then %><div class="cbi-map-descr"><%=self.description%></div><% end %>
		<% self:render_children() %>
		<br />
	</div>
<%- if self.message then %>
	<div><span style='color: green'><%=self.message%></span></div>
<%- else %>
	<script type="text/javascript">
	</script>
<%- end %>
<%- if self.errmessage then %>
	<div class="error"><span style='color: red'><%=self.errmessage%></span></div>
<%- end %>
<% if not self.embedded then %>
	<div class="cbi-page-actions">
	<div style="float: left;width: 70%;text-align: left;line-height: 16px;">
		<%:* If changes are made, commit will apply to current session. To save beyond system reboot, click Commit button but also Save config on Save tab.%>
	</div>
<%-
	if type(self.hidden) == "table" then
		for k, v in pairs(self.hidden) do
-%>
	<input type="hidden" id="<%=k%>" name="<%=k%>" value="<%=pcdata(v)%>" />
<%-
		end
	end
%>
<% if redirect then %>
	<div style="float:left">
		<input class="cbi-button cbi-button-link" type="button" value="<%:Back to Overview%>" onclick="location.href='<%=pcdata(redirect)%>'" />
	</div>
<% end %>
<%- if self.flow and self.flow.skip then %>
	<input class="cbi-button cbi-button-skip" type="submit" name="cbi.skip" value="<%:Skip%>" />
<% end %>
<%- if self.submit ~= false then %>
	<input class="cbi-button cbi-button-save" type="submit" name="cbi.commit" value="
		<%- if not self.submit then -%><%-:Commit-%><%-else-%><%=self.submit%><%end-%>
	" />
<% end %>
<%- if self.reset ~= false then %>
	<input class="cbi-button cbi-button-reset" type="reset" name="cbi.reset" value="
		<%- if not self.reset then -%><%-:Reset-%><%-else-%><%=self.reset%><%end-%>
	" />
<% end %>
<%- if self.cancel ~= false and self.on_cancel then %>
	<input class="cbi-button cbi-button-reset" type="submit" name="cbi.cancel" value="
		<%- if not self.cancel then -%><%-:Cancel-%><%-else-%><%=self.cancel%><%end-%>
	" />
<% end %>
		<script type="text/javascript">cbi_d_update();</script>
	</div>
<!--</form> -->
<script type="text/javascript">
		var vrfList = document.getElementById('cbi-vrf-id-table');
		var list = vrfList.getElementsByClassName('cbi-section-table-row');
		if (list.length > 0) {
			for (loop in list) {
				var child = list[loop];
				console.log(child.id);
				if (child.id != undefined) {
					vrfName = child.id.replace('cbi-vrf-id-', '');
					document.getElementById('cbid.vrf-list.'+vrfName+'.table').disabled = 'disabled';
				}
			}
		}
		var routeList = document.getElementById('cbi-route-id-table');
		list = routeList.getElementsByClassName('cbi-section-table-row');
		if (list.length > 0) {
			for (loop in list) {
				var child = list[loop];
				if (child.id != undefined) {
					routeName = child.id.replace('cbi-route-id-', '');
					document.getElementById('cbid.route-list.'+routeName+'.dest').disabled = 'disabled';
					document.getElementById('cbid.route-list.'+routeName+'.via').disabled = 'disabled';
					document.getElementById('cbid.route-list.'+routeName+'.table').disabled = 'disabled';
					document.getElementById('cbid.route-list.'+routeName+'.dev').disabled = 'disabled';
				}
			}
		}
		var addressList = document.getElementById('cbi-address-id-table');
		list = addressList.getElementsByClassName('cbi-section-table-row');
		if (list.length > 0) {
			for (loop in list) {
				var child = list[loop];
				if (child.id != undefined) {
					addressName = child.id.replace('cbi-address-id-', '');
					document.getElementById('cbid.address-list.'+addressName+'.address').disabled = 'disabled';
					document.getElementById('cbid.address-list.'+addressName+'.prefix').disabled = 'disabled';
					document.getElementById('cbid.address-list.'+addressName+'.interface').disabled = 'disabled';
				}
			}
		}
</script>
<% end %>
